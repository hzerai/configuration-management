<div class="w-75 mx-auto mt-5 overflow-hidden">
  <div style="height: 400px">
    <div
      class="rounded px-2 py-2"
      style="margin-inline: 7rem; z-index: 11"
    >
      <div
        *ngIf="!all_tables && !tables_loading"
        class="btn-group w-100"
        role="group"
      >
        <button
          (click)="loadFromGit()"
          type="button"
          class="btn btn-outline-primary me-3 w-25"
        >
          <div class="d-flex align-items-center justify-content-center">
            <strong>Load from git</strong>
            <img src="assets\img\git-lab.png" width="30px" class="ms-3" />
          </div>
        </button>

        <button type="button" class="btn btn-outline-primary me-3 w-25">
          <label role="button" for="upload" class="w-100">
            <span
              class="d-flex align-items-center justify-content-center"
              aria-hidden="true"
            >
              <strong>Upload file</strong>
              <img src="assets\img\file.png" width="30px" class="ms-3" />
            </span>
            <input
              (change)="loadFromFile($event)"
              type="file"
              id="upload"
              style="display: none"
            />
          </label>
        </button>
        <button
          (click)="loadFromDB()"
          type="button"
          class="btn btn-outline-primary me-3 w-25"
        >
          <div class="d-flex align-items-center justify-content-center">
            <strong>Select from DB</strong>
            <img src="assets\img\db.png" width="30px" class="ms-3" />
          </div>
        </button>
      </div>
      <div
        *ngIf="tables_loading"
        class="d-flex flex-column justify-content-center align-items-center"
      >
        <div class="spinner-border" role="status" aria-hidden="true"></div>
        <small>Loading tables</small>
      </div>
      <div *ngIf="all_tables">
        <div>
          <p class="fs-5">Tables loaded from {{ tables_source }}</p>
        </div>
        <div class="d-flex">
          <div class="flex-grow-1">
            <div class="input-group rounded" style="position: relative">
              <input
                (keyup)="allTableFilter()"
                type="search"
                class="w-100 form-control rounded"
                [(ngModel)]="allTablesSearch"
                (click)="allTableFilter()"
              />
              <svg
                style="position: absolute; right: 8px; top: 30%; color: gray"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                fill="currentColor"
                class="bi bi-search"
                viewBox="0 0 16 16"
              >
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
                />
              </svg>
            </div>
            <div
              class="border-start border-end rounded ps-2"
              style="max-height: 250px; overflow-y: auto"
            >
              <div
                class="d-flex justify-content-between border-bottom"
                *ngFor="let table of all_tables_temps_filtered"
              >
                <div>
                  {{ table.table }}
                </div>
                <input
                  class="form-check-input"
                  type="checkbox"
                  (change)="table.selected = !table.selected"
                  [checked]="table.selected"
                />
              </div>
            </div>
          </div>
          <div
            class="d-flex flex-column align-items-center justify-content-center mx-2"
          >
            <svg
              (click)="addSelected()"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              fill="currentColor"
              class="bi bi-chevron-double-right mb-2"
              style="cursor: pointer"
              viewBox="0 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"
              />
              <path
                fill-rule="evenodd"
                d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"
              />
            </svg>
            <svg
              (click)="removeSelected()"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              fill="currentColor"
              class="bi bi-chevron-double-left"
              viewBox="0 0 16 16"
              style="cursor: pointer"
            >
              <path
                fill-rule="evenodd"
                d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
              />
              <path
                fill-rule="evenodd"
                d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
              />
            </svg>
          </div>
          <div class="flex-grow-1">
            <div class="input-group rounded" style="position: relative">
              <input
                (keyup)="selectedTableFilter()"
                type="search"
                class="w-100 form-control rounded"
                [(ngModel)]="selectedTablesSearch"
                (click)="selectedTableFilter()"
              />
              <svg
                style="position: absolute; right: 8px; top: 30%; color: gray"
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                fill="currentColor"
                class="bi bi-search"
                viewBox="0 0 16 16"
              >
                <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
                />
              </svg>
            </div>
            <div
              class="border-start border-end rounded ps-2"
              style="max-height: 250px; overflow-y: auto"
            >
              <div
                class="d-flex justify-content-between border-bottom"
                *ngFor="let table of selected_tables_filtered"
              >
                <div>
                  {{ table.table }}
                </div>
                <input
                  class="form-check-input"
                  type="checkbox"
                  (change)="table.selected = !table.selected"
                  [checked]="table.selected"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-grid gap-2 d-md-flex justify-content-between mt-4">
    <button (click)="step_back()" class="btn btn-secondary" type="button">
      Back
    </button>
    <button
      [disabled]="selected_tables.length == 0"
      (click)="step()"
      class="btn btn-primary"
      type="button"
    >
      Next
    </button>
  </div>
</div>
